"use strict";

$(document).ready(function() {
  // Inicialización de DataTable para la lista de proyectos
  $("#projectList").DataTable({
    pageLength: 10, // Mostrar 10 registros por defecto
    lengthMenu: [10, 20, 50, 100, 200, 500], // Opciones de paginación
    language: { // Configuración de idioma en español
      search: "_INPUT_",
      searchPlaceholder: "Buscar proyectos...",
      lengthMenu: "Mostrar _MENU_ proyectos",
      info: "Mostrando _START_ a _END_ de _TOTAL_ proyectos",
      infoEmpty: "No hay proyectos registrados",
      infoFiltered: "(filtrado de _MAX_ proyectos totales)"
    }
  });

  // Manejar el checkbox "Seleccionar todos"
  $("#checkAllProject").change(function() {
    const todosSeleccionados = this.checked;
    
    // Actualizar todos los checkboxes y sus filas
    $(".checkbox").each(function() {
      this.checked = todosSeleccionados;
      $(this).closest(".single-items").toggleClass("selected", todosSeleccionados);
    });
  });

  // Manejar clic en checkboxes individuales
  $(".checkbox").on("click", function() {
    // Verificar si todos los checkboxes están seleccionados
    const todosMarcados = $(".checkbox:checked").length === $(".checkbox").length;
    $("#checkAllProject").prop("checked", todosMarcados);
  });

  // Alternar clase 'selected' al hacer clic en cualquier checkbox
  $(".items-wrapper").on("click", "input:checkbox", function() {
    $(this).closest(".single-items").toggleClass("selected", this.checked);
  });

  // Inicializar elementos pre-seleccionados
  $(".items-wrapper input:checkbox:checked").closest(".single-items").addClass("selected");
});