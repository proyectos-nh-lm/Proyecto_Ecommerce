"use strict";

$(document).ready(function() {
  // Task search functionality
  $("#tasksSearch").on("keyup", function() {
    const searchTerm = $(this).val().toLowerCase();
    
    $(".single-task-list").each(function() {
      const taskText = $(this).text().toLowerCase();
      $(this).toggle(taskText.includes(searchTerm));
    });
  });

  // Task completion toggle
  $(document).on("change", "[data-checked-action='task-action']", function() {
    const taskItem = $(this).closest(".single-task-list");
    $(this).prop("checked") 
      ? taskItem.addClass("task-completed")
      : taskItem.removeClass("task-completed");
  });

  // Initialize date range pickers
  const taskDateRange = document.getElementById("taskDateRange");
  const taskDateRangeAdd = document.getElementById("taskDateRangeAdd");
  
  new DateRangePicker(taskDateRange, {
    clearBtn: true,
    allowOneSidedRange: true
  });
  
  new DateRangePicker(taskDateRangeAdd, {
    clearBtn: true,
    allowOneSidedRange: true
  });

  // Initialize rich text editors
  new Quill("#notesEditor", {
    placeholder: "Compose an epic...@mention, #tag",
    theme: "snow"
  });
  
  new Quill("#notesEditorAdd", {
    placeholder: "Compose an epic...@mention, #tag",
    theme: "snow"
  });
});