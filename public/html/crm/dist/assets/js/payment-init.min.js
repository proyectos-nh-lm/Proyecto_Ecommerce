"use strict";

$(document).ready(function() {
  // Inicializar DataTable para la lista de pagos
  $("#paymentList").DataTable({
    pageLength: 10, // Mostrar 10 registros por defecto
    lengthMenu: [10, 20, 50, 100, 200, 500], // Opciones de paginaci칩n
    language: { // Configuraci칩n de idioma
      search: "_INPUT_",
      searchPlaceholder: "Buscar pagos...",
      lengthMenu: "Mostrar _MENU_ pagos por p치gina",
      info: "Mostrando _START_ a _END_ de _TOTAL_ pagos",
      infoEmpty: "No hay pagos disponibles",
      infoFiltered: "(filtrado de _MAX_ pagos totales)"
    }
  });

  // Manejar el cambio en "Seleccionar todos"
  $("#checkAllPayment").change(function() {
    const todosSeleccionados = this.checked;
    
    // Actualizar todos los checkboxes y sus filas
    $(".checkbox").each(function() {
      this.checked = todosSeleccionados;
      $(this).closest(".single-items").toggleClass("selected", todosSeleccionados);
    });
  });

  // Manejar clic en checkboxes individuales
  $(".checkbox").on("click", function() {
    // Verificar si todos est치n seleccionados
    const todosMarcados = $(".checkbox").length === $(".checkbox:checked").length;
    $("#checkAllPayment").prop("checked", todosMarcados);
  });

  // Alternar clase 'selected' al hacer clic
  $(".items-wrapper").on("click", "input:checkbox", function() {
    $(this).closest(".single-items").toggleClass("selected", this.checked);
  });

  // Inicializar elementos ya seleccionados
  $(".items-wrapper input:checkbox:checked").closest(".single-items").addClass("selected");
});