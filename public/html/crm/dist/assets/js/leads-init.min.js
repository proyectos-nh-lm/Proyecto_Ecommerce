"use strict";

$(document).ready(function() {
  // Inicialización de DataTable para la lista de leads
  $("#leadList").DataTable({
    pageLength: 10, // Mostrar 10 registros por defecto
    lengthMenu: [10, 20, 50, 100, 200, 500], // Opciones de paginación
    language: { // Configuración de idioma para la tabla
      search: "_INPUT_",
      searchPlaceholder: "Buscar leads...",
      lengthMenu: "Mostrar _MENU_ leads por página",
      info: "Mostrando _START_ a _END_ de _TOTAL_ leads",
      infoEmpty: "No hay leads disponibles",
      infoFiltered: "(filtrado de _MAX_ leads totales)"
    }
  });

  // Funcionalidad para seleccionar/deseleccionar todos
  $("#checkAllLead").change(function() {
    const isChecked = this.checked; // Estado del checkbox "Seleccionar todos"
    
    // Marcar/desmarcar todos los checkboxes y sus filas padres
    $(".checkbox").each(function() {
      this.checked = isChecked;
      $(this).closest(".single-items").toggleClass("selected", isChecked);
    });
  });

  // Manejo de checkboxes individuales
  $(".checkbox").on("click", function() {
    // Verificar si todos los checkboxes están seleccionados
    const allChecked = $(".checkbox:checked").length === $(".checkbox").length;
    $("#checkAllLead").prop("checked", allChecked);
  });

  // Alternar clase 'selected' al hacer click en cualquier checkbox
  $(".items-wrapper").on("click", "input:checkbox", function() {
    $(this).closest(".single-items").toggleClass("selected", this.checked);
  });

  // Inicializar estado de elementos pre-seleccionados
  $(".items-wrapper input:checkbox:checked").closest(".single-items").addClass("selected");
});